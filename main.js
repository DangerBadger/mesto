(()=>{"use strict";var t=document.querySelector(".profile__edit-button"),e=document.querySelector(".profile__add-button"),n=document.querySelector("#popupFormAvatar"),r=document.querySelector("#popupFormProfile"),o=r.querySelector("#input-name"),i=r.querySelector("#input-job"),u=document.querySelector("#popupFormCard"),a=document.querySelector(".profile__avatar-button"),c={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__submit-btn_inactive",inputErrorClass:"popup__form-input_type_error"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e,n){return(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===s(e)?e:String(e)}var y=f((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"_showInputError",(function(t,e){var n=r._formElement.querySelector("#".concat(t.id,"-error"));t.classList.add(r._inputErrorClass),n.textContent=e})),p(this,"_hideInputError",(function(t){var e=r._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove("".concat(r._inputErrorClass)),e.textContent=""})),p(this,"_checkInputValidity",(function(t){t.validity.valid?r._hideInputError(t):r._showInputError(t,t.validationMessage)})),p(this,"clearErrors",(function(){r._inputList.forEach((function(t){r._hideInputError(t)}))})),p(this,"disableSubmitButton",(function(){r._buttonElement.classList.add(r._inactiveButtonClass),r._buttonElement.disabled=!0})),p(this,"enableValidation",(function(){r._setValidationEventListeners()})),p(this,"_hasInvalidInput",(function(){return r._inputList.some((function(t){return!t.validity.valid}))})),p(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r.disableSubmitButton():(r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.removeAttribute("disabled"))})),p(this,"_setValidationEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(t){t.addEventListener("input",(function(){r._checkInputValidity(t),r._toggleButtonState()}))}))})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}));function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===m(o)?o:String(o)),r)}var o}var b=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._initialArray.forEach((function(e){t._renderer(e)}))}},{key:"addItemAppEnd",value:function(t){this._container.append(t)}},{key:"addItemPrepEnd",value:function(t){this._container.prepend(t)}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===v(e)?e:String(e)}var g=function(){function t(e,n,r,o){var i,u,a,c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=function(){c._card.remove(),c._card=null},(u=S(u="deleteCardLocal"))in i?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,this._data=e.data,this._userId=e.userId,this._ownerId=this._data.owner._id,this._openCard=e.handleOpenImagePopup,this._templateSelector=n,this._handleDeleteConfirm=r,this._handleCardLikeClick=o}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"isLiked",value:function(){var t=this;return this._data.likes.find((function(e){return e._id===t._userId}))}},{key:"countLikes",value:function(t){this._data.likes=t,this._card.querySelector(".elements__like-counter").textContent=this._data.likes.length,this.isLiked()?this._elementLikeButton.classList.add("elements__like-button_active"):this._elementLikeButton.classList.remove("elements__like-button_active")}},{key:"generateCard",value:function(){return this._card=this._getTemplate(),this._deleteButton=this._card.querySelector(".elements__delete-btn"),this._elementImg=this._card.querySelector(".elements__img"),this._setEventListeners(),this._elementImg.src=this._data.link,this._elementImg.alt=this._data.name,this._card.querySelector(".elements__caption").textContent=this._data.name,this.countLikes(this._data.likes),this._ownerId!==this._userId&&(this._deleteButton.style.display="none"),this._card}},{key:"_setEventListeners",value:function(){var t=this;this._elementLikeButton=this._card.querySelector(".elements__like-button"),this._elementLikeButton.addEventListener("click",(function(){t._handleCardLikeClick(t._data._id)})),this._deleteButton.addEventListener("click",(function(){t._handleDeleteConfirm(t._data._id)})),this._card.querySelector(".elements__img-button").addEventListener("click",(function(){t._handleImageClick()}))}},{key:"_handleImageClick",value:function(){this._openCard(this._data)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function E(t,e,n){return(e=j(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===k(e)?e:String(e)}var P=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,"_handleEscClose",(function(t){"Escape"===t.key&&n.close()})),E(this,"_setKeyHandler",(function(){document.addEventListener("keydown",n._handleEscClose)})),E(this,"_removeKeyHandler",(function(){document.removeEventListener("keydown",n._handleEscClose)})),this._popupSelector=document.querySelector(e)}var e,n;return e=t,(n=[{key:"_bindPopupsOverlayClickHandlers",value:function(){var t=this;this._popupSelector.addEventListener("mousedown",(function(e){e.target===e.currentTarget&&t.close()}))}},{key:"_bindPopupsCloseButtonsClickHandlers",value:function(){var t=this;this._popupSelector.addEventListener("click",(function(e){e.target.classList.contains("close-btn")&&t.close()}))}},{key:"setEventListeners",value:function(){this._bindPopupsCloseButtonsClickHandlers(),this._bindPopupsOverlayClickHandlers()}},{key:"open",value:function(){this._popupSelector.classList.add("popup_opened"),this._setKeyHandler()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_opened"),this._removeKeyHandler()}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===L(o)?o:String(o)),r)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=I(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function I(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function B(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(o){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return B(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._imageLink=e._popupSelector.querySelector(".popup__figure-image"),e._imageText=e._popupSelector.querySelector(".popup__figure-caption"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;O(x(u.prototype),"open",this).call(this),this._imageLink.src=n,this._imageLink.alt=e,this._imageText.textContent=e}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===R(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=V(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},A.apply(this,arguments)}function V(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function D(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(r);if(o){var n=F(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return D(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=e,n._inputList=Array.from(n._popupSelector.querySelectorAll(".popup__form-input")),n._submitButton=n._popupSelector.querySelector(".popup__submit-btn"),n._submitButtonText=n._submitButton.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"changeHandleFormSubmit",value:function(t){this._handleFormSubmit=t}},{key:"renderLoading",value:function(t){if(t)switch(this._submitButtonText){case"Сохранить":this._submitButton.textContent="Сохранение...";break;case"Создать":this._submitButton.textContent="Создание...";break;case"Да":this._submitButton.textContent="Удаление..."}else this._submitButton.textContent=this._submitButtonText}},{key:"setEventListeners",value:function(){var t=this;A(F(u.prototype),"setEventListeners",this).call(this),this._form=this._popupSelector.querySelector(".popup__form"),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){A(F(u.prototype),"close",this).call(this),this._form.reset()}}])&&U(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(P);function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===K(o)?o:String(o)),r)}var o}var G=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameInput=document.querySelector(n),this._jobInput=document.querySelector(r),this._avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return this._name=this._nameInput.textContent,this._job=this._jobInput.textContent,{name:this._name,job:this._job}}},{key:"setUserInfo",value:function(t){t.name&&(this._nameInput.textContent=t.name),t.about&&(this._jobInput.textContent=t.about),t.avatar&&(this._avatar.src=t.avatar)}}])&&J(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===z(o)?o:String(o)),r)}var o}var Q=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var e,n;return e=t,(n=[{key:"getProfileInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"editProfile",value:function(t){var e=t.name,n=t.job;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:n})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"addNewCard",value:function(t){var e=t.name,n=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:n})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"deleteCardOnline",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"addLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"deleteLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}},{key:"changeAvatar",value:function(t){var e=t.link;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status," ").concat(t.statusText))})).catch((function(t){console.log(t)}))}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),W=void 0,X=new y(c,u),Y=new y(c,r),Z=new y(c,n),$=new Q({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"36b86947-e3e3-40c9-9f59-59007cbe88e7","Content-Type":"application/json"}});$.getProfileInfo().then((function(t){ct.setUserInfo(t),W=t._id})),$.getInitialCards().then((function(t){t.forEach((function(t){var e=et({data:t,userId:W,handleOpenImagePopup:tt},".template");nt.addItemAppEnd(e)}))}));var tt=function(t){rt.open(t)},et=function(t,e){var n=new g(t,e,(function(t){ot.open(),ot.changeHandleFormSubmit((function(){ot.renderLoading(!0),$.deleteCardOnline(t).then((function(){n.deleteCardLocal(),ot.close()})).finally((function(){ot.renderLoading(!1)}))}))}),(function(t){n.isLiked()?$.deleteLike(t).then((function(t){n.countLikes(t.likes)})):$.addLike(t).then((function(t){n.countLikes(t.likes)}))}));return n.generateCard()},nt=new b({items:[],renderer:function(t){var e=et({data:t,handleOpenImagePopup:tt},".template");nt.addItemAppEnd(e)}},".elements__list"),rt=new q("#popupImage"),ot=new N("#popupDeleteConfirm"),it=new N("#popupAvatar",(function(t){it.renderLoading(!0),$.changeAvatar(t).then((function(t){ct.setUserInfo(t),it.close()})).finally((function(){it.renderLoading(!1)}))})),ut=new N("#popupCard",(function(t){ut.renderLoading(!0),$.addNewCard(t).then((function(t){var e=et({data:t,userId:W,handleOpenImagePopup:tt},".template");nt.addItemPrepEnd(e),ut.close()})).finally((function(){ut.renderLoading(!1)}))})),at=new N("#popupProfile",(function(t){at.renderLoading(!0),$.editProfile(t).then((function(t){ct.setUserInfo(t),at.close()})).finally((function(){at.renderLoading(!1)}))})),ct=new G({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"});e.addEventListener("click",(function(){X.clearErrors(),X.disableSubmitButton(),ut.open()})),t.addEventListener("click",(function(){var t,e,n;Y.clearErrors(),Y.disableSubmitButton(),t=ct.getUserInfo(),e=t.name,n=t.job,o.value=e,i.value=n,at.open()})),a.addEventListener("click",(function(){Z.clearErrors(),Z.disableSubmitButton(),it.open()})),rt.setEventListeners(),at.setEventListeners(),ut.setEventListeners(),ot.setEventListeners(),it.setEventListeners(),X.enableValidation(),Y.enableValidation(),Z.enableValidation(),nt.renderItems()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBb0J5QyxpQkFBaUIsU0FiZixXQUNwQitILEVBQWtCdUMsY0FDbEJ2QyxFQUFrQmxJLHNCQUNsQm9LLEdBQVVmLE1BQ1osSUFZQTlMLEVBQXVCNEMsaUJBQWlCLFNBL0JmLFdBUUssSUFDNUIsRUFBUXFELEVBQU04QyxFQVJkNkIsRUFBcUJzQyxjQUNyQnRDLEVBQXFCbkksc0JBT3JCLEVBQXNCeUksR0FBU2lDLGNBQXZCbEgsRUFBSSxFQUFKQSxLQUFNOEMsRUFBRyxFQUFIQSxJQUNkekksRUFBVXlILE1BQVE5QixFQUNsQjFGLEVBQVN3SCxNQUFRZ0IsRUFQakJpRSxHQUFVbEIsTUFDWixJQTZCQXJMLEVBQXNCbUMsaUJBQWlCLFNBYmYsV0FDdEJpSSxFQUFvQnFDLGNBQ3BCckMsRUFBb0JwSSxzQkFDcEJpSyxHQUFZWixNQUNkLElBV0FELEdBQVN1QixvQkFDVEosR0FBVUksb0JBQ1ZQLEdBQVVPLG9CQUNWbkIsR0FBYW1CLG9CQUNiVixHQUFZVSxvQkFDWnpDLEVBQWtCMEMsbUJBQ2xCekMsRUFBcUJ5QyxtQkFDckJ4QyxFQUFvQndDLG1CQUNwQjNCLEdBQWdCNEIsYSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHByb2ZpbGVQb3B1cE9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZFNlbGVjdG9yID0gJyNwb3B1cENhcmQnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlU2VsZWN0b3IgPSAnI3BvcHVwUHJvZmlsZSc7XHJcbmV4cG9ydCBjb25zdCBjYXJkUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKVxyXG5leHBvcnQgY29uc3QgZm9ybUF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBGb3JtQXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBGb3JtUHJvZmlsZScpOyAgXHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBmb3JtUHJvZmlsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0LW5hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZm9ybVByb2ZpbGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC1qb2InKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1DYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEZvcm1DYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uYW1lJztcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2JTZWxlY3RvciA9ICcucHJvZmlsZV9fam9iJztcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gJy5lbGVtZW50c19fbGlzdCc7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQb3B1cE9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9fZm9ybS1pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdC1idG4nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ0bl9pbmFjdGl2ZScsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2Zvcm0taW5wdXRfdHlwZV9lcnJvcicsXHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vINCk0YPQvdC60YbQuNGPINC00L7QsdCw0LLQu9C10L3QuNGPINC60LvQsNGB0YHQsCDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChmb3JtSW5wdXQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Zm9ybUlucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZm9ybUlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICB9O1xyXG5cclxuICAvLyDQpNGD0L3QutGG0LjRjyDRg9C00LDQu9C10L3QuNGPINC60LvQsNGB0YHQsCDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF9oaWRlSW5wdXRFcnJvciA9IChmb3JtSW5wdXQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2Zvcm1JbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGZvcm1JbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGAke3RoaXMuX2lucHV0RXJyb3JDbGFzc31gKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIC8vINCk0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0L/QvtC70Y9cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1JbnB1dCkgPT4ge1xyXG4gICAgaWYgKCFmb3JtSW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoZm9ybUlucHV0LCBmb3JtSW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUlucHV0KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAgLy8g0J7Rh9C40YnQsNC10Lwg0L7RiNC40LHQutC4XHJcbiAgIGNsZWFyRXJyb3JzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGZvcm1JbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtSW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDQlNC10LvQsNC10Lwg0LrQvdC+0L/QutC4INC90LXQsNC60YLQuNCy0L3Ri9C80Lgg0L/RgNC4INC+0YLQutGA0YvRgtC40LggcG9wdXAgXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH07XHJcblxyXG4gIC8vINCS0YvQt9C+0LIg0YTRg9C90LrRhtC40LggaXNWYWxpZCDQvdCwINC60LDQttC00YvQuSDQstCy0L7QtCDRgdC40LzQstC+0LvQsFxyXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChmb3JtSW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFmb3JtSW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQo9C/0YDQsNCy0LvQtdC90LjQtSDRgdC+0YHRgtC+0Y/QvdC40LXQvCDQutC90L7Qv9C60LhcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0KHQvtCx0LjRgNCw0LXQvCDQstGB0LUg0YHQu9GD0YjQsNGC0LXQu9C4XHJcbiAgX3NldFZhbGlkYXRpb25FdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGZvcm1JbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1JbnB1dCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtQXBwRW5kKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtUHJlcEVuZChlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZURlbGV0ZUNvbmZpcm0sIGhhbmRsZUNhcmRMaWtlQ2xpY2spIHtcclxuICAgIHRoaXMuX2RhdGEgPSBzZXR0aW5ncy5kYXRhO1xyXG4gICAgdGhpcy5fdXNlcklkID0gc2V0dGluZ3MudXNlcklkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IHRoaXMuX2RhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fb3BlbkNhcmQgPSBzZXR0aW5ncy5oYW5kbGVPcGVuSW1hZ2VQb3B1cDtcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IGhhbmRsZURlbGV0ZUNvbmZpcm07XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUNsaWNrID0gaGFuZGxlQ2FyZExpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0nKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIGNvbnN0IGlzTGlrZWRCeVVzZXIgPSB0aGlzLl9kYXRhLmxpa2VzLmZpbmQodXNlciA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKVxyXG5cclxuICAgIHJldHVybiBpc0xpa2VkQnlVc2VyXHJcbiAgfVxyXG5cclxuICBjb3VudExpa2VzKGFjdHVhbExpa2VzKSB7XHJcbiAgICB0aGlzLl9kYXRhLmxpa2VzID0gYWN0dWFsTGlrZXNcclxuICAgIGNvbnN0IGNhcmRMaWtlQ291bnRlciA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlLWNvdW50ZXInKVxyXG4gICAgY2FyZExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGhcclxuXHJcbiAgICBpZih0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkTG9jYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19kZWxldGUtYnRuJyk7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1nID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2ltZycpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50SW1nLnNyYyA9IHRoaXMuX2RhdGEubGluaztcclxuICAgIHRoaXMuX2VsZW1lbnRJbWcuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2NhcHRpb24nKS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuXHJcbiAgICB0aGlzLmNvdW50TGlrZXModGhpcy5fZGF0YS5saWtlcyk7XHJcblxyXG4gICAgaWYodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKXtcclxuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlLWJ1dHRvbicpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUNsaWNrKHRoaXMuX2RhdGEuX2lkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtKHRoaXMuX2RhdGEuX2lkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pbWctYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlSW1hZ2VDbGljaygpIHtcclxuICAgIHRoaXMuX29wZW5DYXJkKHRoaXMuX2RhdGEpO1xyXG4gIH1cclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyDQpNGD0L3QutGG0LjRjyDQt9Cw0LrRgNGL0YLQuNGPIHBvcHVwINC90LAgZXNjXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCk0YPQvdC60YbQuNGPINGD0YHRgtCw0L3QvtCy0LrQuCDRgdC70YPRiNCw0YLQtdC70Y8g0LfQsNC60YDRi9GC0LjRjyBwb3B1cCDQvdCwIGVzYyDQvdCwINCy0LXRgdGMINC00L7QutGD0LzQtdC90YJcclxuICBfc2V0S2V5SGFuZGxlciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQodC90Y/RgtC40LUg0YHQu9GD0YjQsNGC0LXQu9GPINC30LDQutGA0YvRgtC40Y8gcG9wdXAg0L3QsCBlc2Mg0L3QsCDQstC10YHRjCDQtNC+0LrRg9C80LXQvdGCXHJcbiAgX3JlbW92ZUtleUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g0JfQsNC60YDRi9GC0LjQtSBwb3B1cCDQvdCwINC+0LLQtdGA0LvQtdC1XHJcbiAgX2JpbmRQb3B1cHNPdmVybGF5Q2xpY2tIYW5kbGVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQl9Cw0LrRgNGL0YLQuNC1IHBvcHVwINC90LAg0LrRgNC10YHRgtC40LrQtVxyXG4gIF9iaW5kUG9wdXBzQ2xvc2VCdXR0b25zQ2xpY2tIYW5kbGVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UtYnRuJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH07XHJcbiAgICB9KVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fYmluZFBvcHVwc0Nsb3NlQnV0dG9uc0NsaWNrSGFuZGxlcnMoKTtcclxuICAgIHRoaXMuX2JpbmRQb3B1cHNPdmVybGF5Q2xpY2tIYW5kbGVycygpO1xyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgdGhpcy5fc2V0S2V5SGFuZGxlcigpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIHRoaXMuX3JlbW92ZUtleUhhbmRsZXIoKTtcclxuICB9O1xyXG59OyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUxpbmsgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmlndXJlLWltYWdlJyk7XHJcbiAgICB0aGlzLl9pbWFnZVRleHQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmlndXJlLWNhcHRpb24nKTtcclxuXHJcbiAgfVxyXG5cclxuXHJcbiAgb3Blbih7bmFtZSwgbGlua30pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2ltYWdlTGluay5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VMaW5rLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZVRleHQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH07XHJcbn07XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Zvcm0taW5wdXQnKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ0bicpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlSGFuZGxlRm9ybVN1Ym1pdChuZXdIYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gbmV3SGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZihpc0xvYWRpbmcpIHtcclxuICAgICAgc3dpdGNoKHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQpIHtcclxuICAgICAgICBjYXNlICfQodC+0YXRgNCw0L3QuNGC0YwnOlxyXG4gICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ9Ch0L7Qt9C00LDRgtGMJzpcclxuICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0LfQtNCw0L3QuNC1Li4uJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ9CU0LAnOlxyXG4gICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LXQvdC40LUuLi4nO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3J9KSB7XHJcbiAgICB0aGlzLl9uYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9uYW1lSW5wdXQudGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9qb2IgPSB0aGlzLl9qb2JJbnB1dC50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiB7bmFtZTogdGhpcy5fbmFtZSwgam9iOiB0aGlzLl9qb2J9O1xyXG4gIH1cclxuICAgIFxyXG5cclxuICBzZXRVc2VySW5mbyhpbmZvKSB7XHJcbiAgICBpZihpbmZvLm5hbWUpIHtcclxuICAgICAgdGhpcy5fbmFtZUlucHV0LnRleHRDb250ZW50ID0gaW5mby5uYW1lO1xyXG4gICAgfVxyXG4gICAgaWYoaW5mby5hYm91dCkge1xyXG4gICAgICB0aGlzLl9qb2JJbnB1dC50ZXh0Q29udGVudCA9IGluZm8uYWJvdXQ7XHJcbiAgICB9IFxyXG4gICAgaWYoaW5mby5hdmF0YXIpe1xyXG4gICAgICB0aGlzLl9hdmF0YXIuc3JjID0gaW5mby5hdmF0YXI7XHJcbiAgICB9XHJcbiAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApXHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgfSlcclxuICB9O1xyXG4gIFxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgfSlcclxuICB9O1xyXG5cclxuICBlZGl0UHJvZmlsZSh7bmFtZSwgam9ifSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGpvYlxyXG4gICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoe25hbWUsIGxpbmt9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmtcclxuICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkT25saW5lKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICBjaGFuZ2VBdmF0YXIoe2xpbmt9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBhdmF0YXI6IGxpbmtcclxuICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApXHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgfSlcclxuICB9O1xyXG4gIFxyXG5cclxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IHtcclxuICBwcm9maWxlUG9wdXBPcGVuQnV0dG9uLFxyXG4gIHBvcHVwUHJvZmlsZVNlbGVjdG9yLFxyXG4gIHBvcHVwQ2FyZFNlbGVjdG9yLFxyXG4gIGNhcmRQb3B1cE9wZW5CdXR0b24sXHJcbiAgZm9ybUF2YXRhckVsZW1lbnQsXHJcbiAgZm9ybVByb2ZpbGVFbGVtZW50LFxyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBmb3JtQ2FyZEVsZW1lbnQsXHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICBwcm9maWxlSm9iU2VsZWN0b3IsXHJcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yLFxyXG4gIGNhcmRzQ29udGFpbmVyLFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgYXZhdGFyUG9wdXBPcGVuQnV0dG9uLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbmxldCB1c2VySWQgPSB1bmRlZmluZWQ7XHJcblxyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1DYXJkRWxlbWVudCk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVByb2ZpbGVFbGVtZW50KTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbG9kYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1BdmF0YXJFbGVtZW50KVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNTUnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICczNmI4Njk0Ny1lM2UzLTQwYzktOWY1OS01OTAwN2NiZTg4ZTcnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSk7XHJcblxyXG5hcGkuZ2V0UHJvZmlsZUluZm8oKVxyXG4gIC50aGVuKChwcm9maWxlSW5mbykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZUluZm8pXHJcbiAgICB1c2VySWQgPSBwcm9maWxlSW5mby5faWRcclxuICB9KTtcclxuXHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkc0FycmF5KSA9PiB7XHJcbiAgICBjYXJkc0FycmF5LmZvckVhY2goY2FyZEl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkYXRhOiBjYXJkSXRlbSxcclxuICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgIGhhbmRsZU9wZW5JbWFnZVBvcHVwOiBoYW5kbGVDYXJkQ2xpY2tcclxuICAgICAgICB9LFxyXG4gICAgICAgICcudGVtcGxhdGUnKTtcclxuICAgICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW1BcHBFbmQoY2FyZClcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGltYWdlRGF0YSkgPT4ge1xyXG4gICAgcG9wdXBJbWcub3BlbihpbWFnZURhdGEpO1xyXG4gIH1cclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEsIHRlbXBsYXRlKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICB0ZW1wbGF0ZSxcclxuICAgIChjYXJkSWQpID0+IHtcclxuICAgICAgcG9wdXBDb25maXJtLm9wZW4oKVxyXG4gICAgICBwb3B1cENvbmZpcm0uY2hhbmdlSGFuZGxlRm9ybVN1Ym1pdCgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBDb25maXJtLnJlbmRlckxvYWRpbmcodHJ1ZSlcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZE9ubGluZShjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZExvY2FsKClcclxuICAgICAgICAgICAgcG9wdXBDb25maXJtLmNsb3NlKClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwQ29uZmlybS5yZW5kZXJMb2FkaW5nKGZhbHNlKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGlmKGNhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZElkKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIGNhcmQuY291bnRMaWtlcyhyZXMubGlrZXMpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY2FyZC5jb3VudExpa2VzKHJlcy5saWtlcylcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogW10sXHJcbiAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoXHJcbiAgICAgIHtcclxuICAgICAgICBkYXRhOiBjYXJkSXRlbSxcclxuICAgICAgICBoYW5kbGVPcGVuSW1hZ2VQb3B1cDogaGFuZGxlQ2FyZENsaWNrXHJcbiAgICAgIH0sXHJcbiAgICAgICcudGVtcGxhdGUnKTtcclxuICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtQXBwRW5kKGNhcmQpO1xyXG4gIH1cclxufSxcclxuICBjYXJkc0NvbnRhaW5lclxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNwb3B1cEltYWdlJyk7XHJcblxyXG5jb25zdCBwb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnI3BvcHVwRGVsZXRlQ29uZmlybScpO1xyXG5cclxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnI3BvcHVwQXZhdGFyJyxcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xyXG4gICAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKVxyXG4gICAgYXBpLmNoYW5nZUF2YXRhcihmb3JtRGF0YSlcclxuICAgICAgLnRoZW4oKGF2YXRhcikgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGF2YXRhcik7XHJcbiAgICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKVxyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSlcclxuICAgICAgfSlcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBwb3B1cEl0ZW0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cENhcmRTZWxlY3RvcixcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xyXG4gICAgcG9wdXBJdGVtLnJlbmRlckxvYWRpbmcodHJ1ZSlcclxuICAgIGFwaS5hZGROZXdDYXJkKGZvcm1EYXRhKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGhhbmRsZU9wZW5JbWFnZVBvcHVwOiBoYW5kbGVDYXJkQ2xpY2tcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnLnRlbXBsYXRlJylcclxuICAgICAgICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbVByZXBFbmQoY2FyZClcclxuICAgICAgICBwb3B1cEl0ZW0uY2xvc2UoKVxyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBJdGVtLnJlbmRlckxvYWRpbmcoZmFsc2UpXHJcbiAgICAgIH0pXHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBVc2VyID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBQcm9maWxlU2VsZWN0b3IsXHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXQoZm9ybURhdGEpIHtcclxuICAgIHBvcHVwVXNlci5yZW5kZXJMb2FkaW5nKHRydWUpXHJcbiAgICBhcGkuZWRpdFByb2ZpbGUoZm9ybURhdGEpXHJcbiAgICAgIC50aGVuKChwcm9maWxlSW5mbykgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVJbmZvKVxyXG4gICAgICAgIHBvcHVwVXNlci5jbG9zZSgpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFVzZXIucmVuZGVyTG9hZGluZyhmYWxzZSlcclxuICAgICAgfSlcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBwcm9maWxlTmFtZVNlbGVjdG9yLFxyXG4gIGpvYlNlbGVjdG9yOiBwcm9maWxlSm9iU2VsZWN0b3IsXHJcbiAgYXZhdGFyU2VsZWN0b3I6IHByb2ZpbGVBdmF0YXJTZWxlY3RvclxyXG59KTtcclxuXHJcbi8vINCe0YLQutGA0YvRgtC40LUgcG9wdXBQcm9maWxlINGBINC/0L7QtNGB0YLQsNC90L7QstC60L7QuSDQt9C90LDRh9C10L3QuNC5LCDQvdC10LDQutGC0LjQstC90YvQvCBzdWJtaXQg0Lgg0L7Rh9C40YHRgtC60L7QuSDQvtGI0LjQsdC+0LpcclxuY29uc3Qgb3BlblByb2ZpbGVQb3B1cCA9ICgpID0+IHtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5jbGVhckVycm9ycygpO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBmaWxsUHJvZmlsZUZvcm1JbnB1dHMoKTtcclxuICBwb3B1cFVzZXIub3BlbigpO1xyXG59O1xyXG5cclxuLy8g0JfQsNC/0L7Qu9C90LXQvdC40LUg0L/QvtC70LXQuSBwb3B1cFByb2ZpbGUg0L/RgNC4INC+0YLQutGA0YvRgtC40LhcclxuY29uc3QgZmlsbFByb2ZpbGVGb3JtSW5wdXRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbn07XHJcblxyXG4vLyDQntGC0LrRgNGL0YLQuNC1IHBvcHVwQ2FyZCDRgSDQv9GD0YHRgtGL0LzQuCDQv9C+0LvRj9C80Lgg0Lgg0L3QtdCw0LrRgtC40LLQvdGL0Lwgc3VibWl0LCDQvtGH0LjRgdGC0LrQsCDQv9C+0LvQtdC5LCDQvtGH0LjRgdGC0LrQsCDQvtGI0LjQsdC+0LpcclxuY29uc3Qgb3BlblBvcHVwQ2FyZCA9ICgpID0+IHtcclxuICBjYXJkRm9ybVZhbGlkYXRvci5jbGVhckVycm9ycygpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBwb3B1cEl0ZW0ub3BlbigpO1xyXG59O1xyXG5cclxuY29uc3Qgb3BlbkF2YXRhclBvcHVwID0gKCkgPT4ge1xyXG4gIGF2YXRhckZvcm1WYWxvZGF0b3IuY2xlYXJFcnJvcnMoKTtcclxuICBhdmF0YXJGb3JtVmFsb2RhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbn1cclxuXHJcbi8vINCh0LvRg9GI0LDRgtC10LvRjCDQvtGC0LrRgNGL0YLQuNGPIHBvcHVwQWRkQ2FyZFxyXG5jYXJkUG9wdXBPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwQ2FyZCk7XHJcblxyXG4vLyDQodC70YPRiNCw0YLQtdC70Ywg0L7RgtC60YDRi9GC0LjRjyBwb3B1cFByb2ZpbGVcclxucHJvZmlsZVBvcHVwT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qcm9maWxlUG9wdXApO1xyXG5cclxuLy8g0KHQu9GD0YjQsNGC0LXQu9GMINC+0YLQutGA0YvRgtC40Y8gcG9wdXBBdmF0YXJcclxuYXZhdGFyUG9wdXBPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkF2YXRhclBvcHVwKTtcclxuXHJcbnBvcHVwSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwVXNlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEl0ZW0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJGb3JtVmFsb2RhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7Il0sIm5hbWVzIjpbInByb2ZpbGVQb3B1cE9wZW5CdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXJkUG9wdXBPcGVuQnV0dG9uIiwiZm9ybUF2YXRhckVsZW1lbnQiLCJmb3JtUHJvZmlsZUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImZvcm1DYXJkRWxlbWVudCIsImF2YXRhclBvcHVwT3BlbkJ1dHRvbiIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiZm9ybUlucHV0IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaW5wdXRMaXN0IiwiZm9yRWFjaCIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJDYXJkIiwic2V0dGluZ3MiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlRGVsZXRlQ29uZmlybSIsImhhbmRsZUNhcmRMaWtlQ2xpY2siLCJfY2FyZCIsIl9kYXRhIiwiZGF0YSIsIl91c2VySWQiLCJ1c2VySWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwiX29wZW5DYXJkIiwiaGFuZGxlT3BlbkltYWdlUG9wdXAiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVEZWxldGVDb25maXJtIiwiX2hhbmRsZUNhcmRMaWtlQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibGlrZXMiLCJmaW5kIiwidXNlciIsImFjdHVhbExpa2VzIiwibGVuZ3RoIiwiaXNMaWtlZCIsIl9lbGVtZW50TGlrZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudEltZyIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwiY291bnRMaWtlcyIsInN0eWxlIiwiZGlzcGxheSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3BvcHVwU2VsZWN0b3IiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJfYmluZFBvcHVwc0Nsb3NlQnV0dG9uc0NsaWNrSGFuZGxlcnMiLCJfYmluZFBvcHVwc092ZXJsYXlDbGlja0hhbmRsZXJzIiwiX3NldEtleUhhbmRsZXIiLCJfcmVtb3ZlS2V5SGFuZGxlciIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlTGluayIsIl9pbWFnZVRleHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25UZXh0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwibmV3SGFuZGxlRm9ybVN1Ym1pdCIsImlzTG9hZGluZyIsIl9mb3JtIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lSW5wdXQiLCJfam9iSW5wdXQiLCJfYXZhdGFyIiwiX25hbWUiLCJfam9iIiwiam9iIiwiaW5mbyIsImFib3V0IiwiYXZhdGFyIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsInVuZGVmaW5lZCIsImNhcmRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsb2RhdG9yIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldFByb2ZpbGVJbmZvIiwicHJvZmlsZUluZm8iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHNBcnJheSIsImNhcmRJdGVtIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJkZWZhdWx0Q2FyZExpc3QiLCJhZGRJdGVtQXBwRW5kIiwiaW1hZ2VEYXRhIiwicG9wdXBJbWciLCJvcGVuIiwiY2FyZERhdGEiLCJ0ZW1wbGF0ZSIsInBvcHVwQ29uZmlybSIsImNoYW5nZUhhbmRsZUZvcm1TdWJtaXQiLCJyZW5kZXJMb2FkaW5nIiwiZGVsZXRlQ2FyZE9ubGluZSIsImRlbGV0ZUNhcmRMb2NhbCIsImZpbmFsbHkiLCJkZWxldGVMaWtlIiwiYWRkTGlrZSIsImdlbmVyYXRlQ2FyZCIsInBvcHVwQXZhdGFyIiwiZm9ybURhdGEiLCJjaGFuZ2VBdmF0YXIiLCJwb3B1cEl0ZW0iLCJhZGROZXdDYXJkIiwiYWRkSXRlbVByZXBFbmQiLCJwb3B1cFVzZXIiLCJlZGl0UHJvZmlsZSIsImNsZWFyRXJyb3JzIiwiZ2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=